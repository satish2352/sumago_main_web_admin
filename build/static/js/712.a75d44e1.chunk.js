"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[712],{712:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var n=l(9950),o=l(1320),s=l(2235),i=l(5769),r=l(9780),a=l(9213),c=l(1671),d=l(4075),u=l(899),h=l(1239),m=l(226),x=l(2712),v=l(9928),j=l(8469),A=l(5333),g=l(7999),p=l(7988),f=l(8429),C=l(4414);const y=()=>{const[e,t]=(0,n.useState)(),[l,y]=(0,n.useState)(!0),[b,S]=(0,n.useState)(""),[k,z]=(0,n.useState)(""),[D,N]=(0,n.useState)({}),[W,V]=(0,n.useState)([]),[w,E]=(0,n.useState)(!1),q=(0,f.Zp)();function T(){j.A.get("/clientCount/getClientsRecord").then((e=>{V(e.data)})).catch((e=>{var t;console.log("err",e),401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&q("/auth/login")}))}(0,n.useEffect)((()=>{T()}),[l,w]);return(0,C.jsx)(x.A,{title:"Valuable Clients",description:"this is Sample page",children:(0,C.jsx)(v.A,{title:"ValuableClients",buttonName:l?"Add Valuable Clients":"View Valuable Clients",onClick:l?()=>{y(!1),E(!1)}:()=>{y(!0),E(!0)},children:l?(0,C.jsx)(o.A,{component:s.A,children:(0,C.jsxs)(i.A,{stickyHeader:!0,children:[(0,C.jsx)(r.A,{children:(0,C.jsxs)(a.A,{children:[(0,C.jsx)(c.A,{style:{fontWeight:"bold",fontSize:"1rem"},children:"Sr No."}),(0,C.jsx)(c.A,{style:{fontWeight:"bold",fontSize:"1rem"},children:"Title"}),(0,C.jsx)(c.A,{style:{fontWeight:"bold",fontSize:"1rem"},children:"Counts"}),(0,C.jsx)(c.A,{style:{fontWeight:"bold",fontSize:"1rem"},children:"Action"})]})}),(0,C.jsx)(d.A,{children:0==W.length?(0,C.jsx)("div",{style:{marginLeft:"10px",color:"red"},children:(0,C.jsx)("h3",{children:"No data found"})}):W.map(((e,l)=>(console.log("item",e),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(a.A,{children:[(0,C.jsx)(c.A,{children:l+1}),(0,C.jsx)(c.A,{children:null===e||void 0===e?void 0:e.name}),(0,C.jsx)(c.A,{children:null===e||void 0===e?void 0:e.counter}),(0,C.jsx)(A.A,{"aria-label":"edit",style:{color:"blue"},onClick:()=>(e=>{console.log("data",e),S(e.name),z(e.counter),t(e.id),y(!1),E(!0)})(e),children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(A.A,{"aria-label":"delete",style:{color:"red"},onClick:()=>{return t=null===e||void 0===e?void 0:e.id,console.log("clientCount",t),void j.A.delete("clientCount/delete/".concat(t)).then((e=>{console.log("Data deleted successfully"),T()})).catch((e=>{var t;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&q("/auth/login"),console.error("Error deleting clientCount:",e)}));var t},children:(0,C.jsx)(p.A,{})})]})}))))})]})}):(0,C.jsx)("form",{onSubmit:w?t=>{t.preventDefault();let l={name:b,counter:k};console.log("newData",l),j.A.put("/clientCount/update/".concat(e),l).then((e=>{console.log("clientCount updated successfully"),T(),y(!0),console.log("Data edited successfully")})).catch((e=>{var t;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&q("/auth/login"),console.error("Error updating clientCount:",e)}))}:e=>{if(e.preventDefault(),(()=>{let e={},t=!0;return k.trim()?/^\d+$/.test(k.trim())||(e.counter="counter must contain only numbers",t=!1):(e.counter="counter is required",t=!1),b.trim()||(e.name="name is required",t=!1),N(e),t})()){let e={counter:k,name:b};j.A.post("clientCount/create",e,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log("resp",e),alert("Data added successfully"),T()})).catch((e=>{var t;401===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&q("/auth/login"),console.log("err",e)})),z(""),S(""),N({}),y(!0),E(!1)}},children:(0,C.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,C.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,C.jsx)(h.A,{fullWidth:!0,label:"Name",value:b,onChange:e=>S(e.target.value),variant:"outlined"}),D.name&&(0,C.jsx)("span",{className:"error",style:{color:"red"},children:D.name})]}),(0,C.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,C.jsx)(h.A,{fullWidth:!0,label:"Counts",value:k,onChange:e=>z(e.target.value),variant:"outlined"}),D.designation&&(0,C.jsx)("span",{className:"error",style:{color:"red"},children:D.counter})]}),(0,C.jsx)(u.Ay,{item:!0,xs:12,children:(0,C.jsx)(m.A,{variant:"contained",type:"submit",color:"".concat(w?"success":"primary"),children:"Submit"})})]})})})})}}}]);